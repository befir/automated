package finance.service;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import common.Ajax;
import common.RestfulAutomatedTest;
import org.testng.Assert;
import org.testng.annotations.Test;

//供应商发票管理
public class apSupplierInvoice extends RestfulAutomatedTest {
    //供应商发票管理查询
    private String queryInvoiceListWithPageUrl = baseUrl + "/back-finance-web/apSupplierInvoice/queryInvoiceListWithPage.do";

    //供应商发票管理重置
    private String queryInvoiceListWithUrl = baseUrl + "/back-finance-web/apSupplierInvoice/queryInvoiceListWithPage.do";

    //供应商发票管理审核
    private String auditInvoiceUrl = baseUrl + "/back-finance-web/apSupplierInvoice/auditInvoice.do";

    //新增供应商发票-查询门店
    private String queryStoreUrl = baseUrl + "/back-finance-web/merchantStore/queryStoreList.do";

    //新增供应商发票-查询供应商
    private String querySupplierUrl = baseUrl + "/back-finance-web/supplier/querySupplierList.do";

    //新增供应商发票-查询商家
    private String queryMerchantUrl = baseUrl + "/back-finance-web/merchantRead/queryMerchantList.do";

    //新增供应商发票
    private String saveInvoiceUrl = baseUrl + "/back-finance-web/apSupplierInvoice/saveInvoice.do";

    //编辑供应商发票
    private String updateInvoiceUrl = baseUrl + "/back-finance-web/apSupplierInvoice/updateInvoice.do";

    //删除供应商发票
    private String deleteInvoiceUrl = baseUrl + "/back-finance-web/apSupplierInvoice/deleteInvoice.do";

    //供应商发票管理查询
    @Test(description = "供应商发票管理查询")
    public void queryInvoiceListWithPage() throws InterruptedException {
        JSONObject param = JSON.parseObject("{\"obj\":{},\"currentPage\":1,\"itemsPerPage\":10}");
        Object o = Ajax.post(driver, queryInvoiceListWithPageUrl, param);

        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
//        JSONObject expectedResult = JSON.parseObject("{\"gitVersion\":{\"git.branch\":\"back-merchant-web-d-2.3.15\",\"git.commit.id\":\"fcd288a5f29b4a62fc0b8beb4ab9549fee28c54e\"},\"data\":{\"total\":1,\"listObj\":[{\"id\":2029080803000006,\"unitName\":\"文心阁核算\",\"unitCode\":\"SJX0001\"}]},\"code\":\"0\"}");
        JSONObject expectedData = JSON.parseObject("{\"total\":13,\"listObj\":[{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542194452000,\"invoiceLeftCode\":\"1101545455417521\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542194461000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541752111544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542194446000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542194446000,\"statusText\":\"已审核\",\"id\":1886083600000140,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193807000,\"invoiceLeftCode\":\"1101545455417946\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542193816000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541794611544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193801000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193801000,\"statusText\":\"已审核\",\"id\":1886083600000138,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193744000,\"invoiceLeftCode\":\"1101545455417935\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542193753000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541793511544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193738000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193738000,\"statusText\":\"已审核\",\"id\":1886083600000136,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193570000,\"invoiceLeftCode\":\"1101545455417674\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541767411544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193570000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193570000,\"statusText\":\"未审核\",\"id\":1886083600000135,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193492000,\"invoiceLeftCode\":\"1101545455417379\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541737911544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193492000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193492000,\"statusText\":\"未审核\",\"id\":1886083600000134,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193143000,\"invoiceLeftCode\":\"1101545455417383\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541738311544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193143000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193143000,\"statusText\":\"未审核\",\"id\":1886083600000132,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193013000,\"invoiceLeftCode\":\"1101545455417447\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541744711544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193013000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193013000,\"statusText\":\"未审核\",\"id\":1886083600000131,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542116511000,\"invoiceLeftCode\":\"1101545455417870\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542183072000,\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541787011544545458\",\"storeCode\":\"16\",\"invoiceTitleType\":1,\"createTime\":1542116511000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542116511000,\"statusText\":\"未审核\",\"id\":1886083500000187,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":18101517160196,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"可口可乐O2O线上店铺\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"superadmin\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542116517000,\"invoiceLeftCode\":\"1101545455417285\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542116526000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541728511544545458\",\"storeCode\":\"16\",\"invoiceTitleType\":1,\"createTime\":1542116124000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542116124000,\"statusText\":\"已审核\",\"id\":1886083500000185,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"可口可乐O2O线上店铺\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"纯净的纯牛奶\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542008159000,\"invoiceLeftCode\":\"1101545450\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545011544545458\",\"storeCode\":\"cw1003\",\"invoiceTitleType\":1,\"createTime\":1542008159000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542008159000,\"statusText\":\"未审核\",\"id\":1886083400000093,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"上海欧电云\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"M003\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"财务o2o\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886081503000005\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231}]}");

        Assert.assertEquals(actualResult.get("data"), expectedData);
//        System.out.println(JSON.toJSONString(o));
    }

//    @Test
//    public void queryAccountUnitByOrgCode()  {
//        JSONObject param = JSON.parseObject("{unitCode: '', unitName: '', currentPage: 1, itemsPerPage: 10}");
//        param.put("unitCode","SJX0001");
//        Object o = Ajax.post(driver,queryAccountUnitServiceUrl,param);
//        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
////        JSONObject expectedResult = JSON.parseObject("{\"gitVersion\":{\"git.branch\":\"back-merchant-web-d-2.3.15\",\"git.commit.id\":\"fcd288a5f29b4a62fc0b8beb4ab9549fee28c54e\"},\"data\":{\"total\":1,\"listObj\":[{\"id\":2029080803000006,\"unitName\":\"文心阁核算\",\"unitCode\":\"SJX0001\"}]},\"code\":\"0\"}");
//        JSONObject expectedData = JSON.parseObject("{\"total\":1,\"listObj\":[{\"id\":2029080803000008,\"unitName\":\"文心阁核算\",\"unitCode\":\"SJX0001\"}]}");
//
//        Assert.assertEquals(actualResult.get("data"),expectedData);
////        Assert.assertEquals(actualResult.get("data"),expectedResult.get("data"));
////        System.out.println(JSON.toJSONString(o));
//    }


    //供应商发票管理重置
    @Test(description = "供应商发票管理重置")
    public void queryInvoiceListWith() throws InterruptedException {
        JSONObject param = JSON.parseObject("{\"obj\":{},\"currentPage\":1,\"itemsPerPage\":10}");
        Object o = Ajax.post(driver, queryInvoiceListWithUrl, param);
        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
//      JSONObject expectedResult = JSON.parseObject("{\"gitVersion\":{\"git.branch\":\"back-merchant-web-d-2.3.15\",\"git.commit.id\":\"fcd288a5f29b4a62fc0b8beb4ab9549fee28c54e\"},\"data\":{\"total\":1,\"listObj\":[{\"id\":2029080803000006,\"unitName\":\"文心阁核算\",\"unitCode\":\"SJX0001\"}]},\"code\":\"0\"}");
        JSONObject expectedData = JSON.parseObject("{\"total\":13,\"listObj\":[{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542194452000,\"invoiceLeftCode\":\"1101545455417521\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542194461000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541752111544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542194446000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542194446000,\"statusText\":\"已审核\",\"id\":1886083600000140,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193807000,\"invoiceLeftCode\":\"1101545455417946\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542193816000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541794611544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193801000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193801000,\"statusText\":\"已审核\",\"id\":1886083600000138,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193744000,\"invoiceLeftCode\":\"1101545455417935\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542193753000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541793511544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193738000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193738000,\"statusText\":\"已审核\",\"id\":1886083600000136,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193570000,\"invoiceLeftCode\":\"1101545455417674\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541767411544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193570000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193570000,\"statusText\":\"未审核\",\"id\":1886083600000135,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193492000,\"invoiceLeftCode\":\"1101545455417379\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541737911544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193492000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193492000,\"statusText\":\"未审核\",\"id\":1886083600000134,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193143000,\"invoiceLeftCode\":\"1101545455417383\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541738311544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193143000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193143000,\"statusText\":\"未审核\",\"id\":1886083600000132,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542193013000,\"invoiceLeftCode\":\"1101545455417447\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541744711544545458\",\"storeCode\":\"spx111401\",\"invoiceTitleType\":1,\"createTime\":1542193013000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542193013000,\"statusText\":\"未审核\",\"id\":1886083600000131,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"浦东店O2O\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542116511000,\"invoiceLeftCode\":\"1101545455417870\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542183072000,\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541787011544545458\",\"storeCode\":\"16\",\"invoiceTitleType\":1,\"createTime\":1542116511000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542116511000,\"statusText\":\"未审核\",\"id\":1886083500000187,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":18101517160196,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"可口可乐O2O线上店铺\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"superadmin\"},{\"supplierName\":\"可口可乐\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542116517000,\"invoiceLeftCode\":\"1101545455417285\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"updateTime\":1542116526000,\"status\":2,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545541728511544545458\",\"storeCode\":\"16\",\"invoiceTitleType\":1,\"createTime\":1542116124000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542116124000,\"statusText\":\"已审核\",\"id\":1886083500000185,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"可口可乐\",\"updateUserid\":1886080801000067,\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"1\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"可口可乐O2O线上店铺\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886082004000301\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231,\"updateUsername\":\"Gyp\"},{\"supplierName\":\"纯净的纯牛奶\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceRightCode\":\"11544545458\",\"invoiceTitleTypeText\":\"个人\",\"settlementStatus\":1,\"updateTimeDb\":1542008159000,\"invoiceLeftCode\":\"1101545450\",\"settlementStatusText\":\"未结算\",\"paymentStatusText\":\"未付款\",\"status\":1,\"invoiceUnTaxedAmt\":850,\"invoiceType\":1,\"paymentStatus\":1,\"openRetryCount\":0,\"openStatusText\":\"无需开票\",\"invoiceCode\":\"110154545011544545458\",\"storeCode\":\"cw1003\",\"invoiceTitleType\":1,\"createTime\":1542008159000,\"invoiceTaxedAmt\":960.5,\"createTimeDb\":1542008159000,\"statusText\":\"未审核\",\"id\":1886083400000093,\"purchaserTaxCode\":\"5212121212\",\"versionNo\":0,\"merchantName\":\"上海欧电云\",\"salerName\":\"上海欧电\",\"invoiceTaxAmt\":110.5,\"merchantCode\":\"M003\",\"salerTaxCode\":\"9856565656\",\"storeName\":\"财务o2o\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886081503000005\",\"invoiceTypeText\":\"普通\",\"isDeleted\":0,\"openStatus\":0,\"createSrcTypeText\":\"\",\"companyId\":231}]}");

        Assert.assertEquals(actualResult.get("data"), expectedData);
        System.out.println(JSON.toJSONString(o));
    }

    //供应商发票管理审核
    @Test(description = "供应商发票管理审核")
    public void auditInvoice() throws InterruptedException {
        JSONObject param = JSON.parseObject("{\"id\":1886081704000077,\"status\":\"2\"}");
        Object o = Ajax.post(driver, auditInvoiceUrl, param);
        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
        JSONObject data = actualResult.getJSONObject("data");
        JSONObject expectedData = JSON.parseObject("");
        Assert.assertEquals(data, expectedData);
       // System.out.println(JSON.toJSONString(o));
    }

    //新增供应商发票-查询门店
    @Test(description = "新增供应商发票-查询门店")
    public void queryStore() throws InterruptedException {
        JSONObject param = JSON.parseObject("{obj:{}, currentPage: 1, itemsPerPage: 10}");
        Object o = Ajax.post(driver, queryStoreUrl, param);
        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
//      JSONObject expectedResult = JSON.parseObject("{\"gitVersion\":{\"git.branch\":\"back-merchant-web-d-2.3.15\",\"git.commit.id\":\"fcd288a5f29b4a62fc0b8beb4ab9549fee28c54e\"},\"data\":{\"total\":1,\"listObj\":[{\"id\":2029080803000006,\"unitName\":\"文心阁核算\",\"unitCode\":\"SJX0001\"}]},\"code\":\"0\"}");
        JSONObject expectedData = JSON.parseObject("{\"total\":112,\"listObj\":[{\"regionCode\":\"310115\",\"storeName\":\"2029084200000059\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000059,\"storeCode\":\"9820181120135009\"},{\"regionCode\":\"310115\",\"storeName\":\"2029084200000051\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000051,\"storeCode\":\"9820181120134650\"},{\"regionCode\":\"310115\",\"storeName\":\"2029084200000043\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000043,\"storeCode\":\"9820181120104130\"},{\"regionCode\":\"310115\",\"storeName\":\"2029084200000035\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000035,\"storeCode\":\"9820181120104000\"},{\"regionCode\":\"310115\",\"storeName\":\"2029084200000027\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000027,\"storeCode\":\"9820181120100324\"},{\"regionCode\":\"310115\",\"storeName\":\"2029084200000019\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000019,\"storeCode\":\"9820181120100258\"},{\"regionCode\":\"310115\",\"storeName\":\"2029084200000011\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000011,\"storeCode\":\"9820181120094125\"},{\"regionCode\":\"310115\",\"storeName\":\"2029084200000003\",\"provinceCode\":\"310000\",\"cityCode\":\"310100\",\"detailAddress\":\"金蝶软件园36号\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029084200000003,\"storeCode\":\"9820181120094032\"},{\"storeName\":\"浦东店O2O\",\"merchantName\":\"桂源铺\",\"merchantId\":2029080800003446,\"storeId\":2029083600000012,\"storeCode\":\"spx111401\"},{\"storeName\":\"可口可乐O2O线上店铺\",\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"storeId\":2029083300000026,\"storeCode\":\"16\"}]}");
        Assert.assertEquals(actualResult.get("data"), expectedData);
//        System.out.println(JSON.toJSONString(o));
    }

    //新增供应商发票-查询供应商
    @Test(description = "新增供应商发票-查询供应商")
    public void querySupplier() throws InterruptedException {
        JSONObject param = JSON.parseObject("{obj:{}, currentPage: 1, itemsPerPage: 10}");
        Object o = Ajax.post(driver, querySupplierUrl, param);
        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
        JSONObject expectedData = JSON.parseObject("{\"total\":4,\"listObj\":[{\"supplierName\":\"纯净的纯牛奶\",\"supplierId\":10,\"supplierCode\":\"1886081503000005\"},{\"supplierName\":\"P蒙牛供应商\",\"supplierId\":11,\"supplierCode\":\"1886081603000000\"},{\"supplierName\":\"可口可乐\",\"supplierId\":12,\"supplierCode\":\"1886082004000301\"},{\"supplierName\":\"维达供应商\",\"supplierId\":13,\"supplierCode\":\"1886082802000015\"}]}");
        Assert.assertEquals(actualResult.get("data"), expectedData);
//        System.out.println(JSON.toJSONString(o));
    }

    //新增供应商发票-查询商家
    @Test
    public void queryMerchant() throws InterruptedException {
        JSONObject param = JSON.parseObject("{obj:{}, currentPage: 1, itemsPerPage: 10}");
        Object o = Ajax.post(driver, queryMerchantUrl, param);
        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
        JSONObject expectedData = JSON.parseObject("{\"total\":299,\"listObj\":[{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"上海欧电云\",\"merchantId\":3,\"merchantCode\":\"M003\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"可口可乐\",\"merchantId\":2029080800000000,\"merchantCode\":\"1\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"百香果天团\",\"merchantId\":2029080800000031,\"merchantCode\":\"20181017001\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"桂源铺\",\"merchantId\":2029080800003446,\"merchantCode\":\"spx101701\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"百易格\",\"merchantId\":2029080902000000,\"merchantCode\":\"10170259\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"P蒙牛商家\",\"merchantId\":2029080902003362,\"merchantCode\":\"CP1001\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"屈臣氏自营商家\",\"merchantId\":2029080902003474,\"merchantCode\":\"SJX2018101801\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"金蝶软件园x\",\"merchantId\":2029080903000000,\"merchantCode\":\"9895565512222\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"上海20181018190810\",\"merchantId\":2029080903000004,\"merchantCode\":\"37152222\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0},{\"merchantTypeName\":\"自营商家\",\"merchantType\":11,\"merchantName\":\"金蝶软件\",\"merchantId\":2029080903000006,\"merchantCode\":\"371522222\",\"itemsPerPage\":0,\"startItem\":0,\"currentPage\":0}]}");
        Assert.assertEquals(actualResult.get("data"), expectedData);
//        System.out.println(JSON.toJSONString(o));
    }

    //新增供应商发票
    @Test
    public void saveInvoice() throws InterruptedException {
        JSONObject param = JSON.parseObject("{\"salerName\":\"上海欧电\",\"invoiceTitleType\":1,\"invoiceTitleContent\":\"上海欧电云\",\"invoiceType\":1,\"supplierInvoiceDetail\":[{\"itemSpec\":\"实体\",\"itemNum\":10,\"itemName\":\"货物\",\"itemUnTaxedUnitAmt\":85,\"itemUnit\":\"财务仓\",\"itemTaxRate\":0.13,\"itemUnTaxedAmt\":\"850.00\",\"itemTaxAmt\":\"110.50\",\"itemTaxedAmt\":\"960.50\"}],\"invoiceLeftCode\":\"1101545450\",\"purchaserTaxCode\":\"5212121212\",\"invoiceRightCode\":\"11544545458\",\"salerTaxCode\":\"9856565656\",\"purchaserName\":\"89421212\",\"supplierCode\":\"1886081503000005\",\"supplierName\":\"纯净的纯牛奶\",\"merchantCode\":\"M003\",\"merchantName\":\"上海欧电云\",\"storeCode\":\"cw1003\",\"storeName\":\"财务o2o\",\"invoiceUnTaxedAmt\":\"850.00\",\"invoiceTaxedAmt\":\"960.50\",\"invoiceTaxAmt\":\"110.50\"}");
        Object o = Ajax.post(driver, saveInvoiceUrl, param);
        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
        JSONObject data = actualResult.getJSONObject("data");
        data.remove("trace");
        JSONObject expectedData = JSON.parseObject("{\"gitVersion\":{\"git.branch\":\"finance_d_2.3.0.22\",\"git.commit.time\":\"20181108194315\",\"git.tags\":\"finance_d_2.3.0.22\",\"git.build.time\":\"20181108205002\",\"git.commit.id\":\"9f090fd8dc7e59dfffdc3f6f214e8c09de802680\"},\"message\":\"发票编码:110154545011544545458已存在\",\"code\":\"20002\"}");
        Assert.assertEquals(data, expectedData);
//        System.out.println(JSON.toJSONString(o));
    }

    //编辑供应商发票
    @Test
    public void updateInvoice() throws InterruptedException {
        JSONObject param = JSON.parseObject("{\"id\":1886082208000034,\"invoiceCode\":\"110154545541011544545458\",\"supplierCode\":\"1886081503000005\",\"supplierName\":\"纯净的纯牛奶\",\"storeCode\":\"100001\",\"storeName\":\"文心阁B2C店铺\",\"merchantCode\":\"1\",\"merchantName\":\"可口可乐\",\"invoiceLeftCode\":\"1101545455410\",\"invoiceRightCode\":\"11544545458\",\"invoiceType\":1,\"invoiceTypeText\":\"普通\",\"invoiceTitleType\":1,\"invoiceTitleTypeText\":\"个人\",\"invoiceTitleContent\":\"上海欧电云\",\"invoiceTime\":null,\"invoiceUnTaxedAmt\":\"80.00\",\"invoiceTaxAmt\":\"10.40\",\"invoiceTaxedAmt\":\"90.40\",\"invoiceTaxRate\":null,\"salerName\":\"上海欧电\",\"salerTaxCode\":\"9856565656\",\"salerAddress\":null,\"salerTelephone\":null,\"salerBankName\":null,\"salerAccountNo\":null,\"salerCertificatePath\":null,\"purchaserName\":\"89421212\",\"purchaserTaxCode\":\"5212121212\",\"purchaserAddress\":null,\"purchaserTelephone\":null,\"purchaserBankName\":null,\"purchaserAccountNo\":null,\"purchaserCertificatePath\":null,\"status\":2,\"statusText\":\"已审核\",\"paymentStatus\":1,\"paymentStatusText\":\"未付款\",\"settlementStatus\":1,\"settlementStatusText\":\"未结算\",\"openStatus\":0,\"openStatusText\":\"无需开票\",\"openRetryCount\":0,\"openErrorMsg\":null,\"openTime\":null,\"invoicePdfPath\":null,\"invoiceImgPath\":null,\"invoiceReceiverMail\":null,\"thirdInvoiceCode\":null,\"auditTime\":null,\"auditUsername\":null,\"createSrcType\":null,\"createSrcTypeText\":\"\",\"remark\":null,\"companyId\":231,\"isDeleted\":0,\"versionNo\":0,\"createUserid\":null,\"createUsername\":null,\"createTime\":1540992106000,\"createTimeDb\":1540992106000,\"serverIp\":null,\"updateUserid\":1886080801000009,\"updateUsername\":\"kekoukele\",\"updateTime\":1540992228000,\"updateTimeDb\":1540992227000,\"supplierInvoiceDetail\":[{\"id\":73,\"invoiceCode\":\"110154545541011544545458\",\"itemName\":\"货物\",\"itemSpec\":\"实体\",\"itemUnit\":\"财务仓\",\"itemNum\":10,\"itemUnTaxedUnitAmt\":8,\"itemUnTaxedAmt\":\"80.00\",\"itemTaxRate\":0.13,\"itemTaxAmt\":\"10.40\",\"itemTaxedAmt\":\"90.40\",\"remark\":null,\"companyId\":231,\"isDeleted\":0,\"versionNo\":null,\"createUserid\":null,\"createUsername\":null,\"createTime\":null,\"createTimeDb\":1540992106000,\"serverIp\":null,\"updateUserid\":null,\"updateUsername\":null,\"updateTime\":null,\"updateTimeDb\":null}],\"createType\":null,\"itemPerPage\":null,\"currentPage\":null,\"invoiceTimeStartDate\":null,\"invoiceTimeEndDate\":null}");
        Object o = Ajax.post(driver, updateInvoiceUrl, param);

        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
        JSONObject data=actualResult.getJSONObject("data");
        data.remove("trace");
        JSONObject expectedData = JSON.parseObject("{\"gitVersion\":{\"git.commit.time\":\"20181108194315\",\"git.branch\":\"finance_d_2.3.0.22\",\"git.tags\":\"finance_d_2.3.0.22\",\"git.build.time\":\"20181108205002\",\"git.commit.id\":\"9f090fd8dc7e59dfffdc3f6f214e8c09de802680\"},\"trace\":\"172!$12#@168%&192!$,9f090fd,71ad97803ddb2063\",\"code\":\"20002\"}");
        expectedData.remove("trace");
        Assert.assertEquals(data, expectedData);
//        System.out.println(JSON.toJSONString(o));
    }

    //删除供应商发票
    @Test
    public void deleteInvoice() throws InterruptedException {
        JSONObject param = JSON.parseObject("{\"id\":1886082300000179,\"invoiceCode\":\"110154545011544545458\"}");
        Object o = Ajax.post(driver, deleteInvoiceUrl, param);
        JSONObject actualResult = JSON.parseObject(JSON.toJSONString(o));
        JSONObject data=actualResult.getJSONObject("data");
//        JSONArray listObj = data.getJSONArray("listObj");
        //取第一个值组的值
//        String merchantName= listObj.getJSONObject(0).getString("merchantName");
//        String merchantCode= listObj.getJSONObject(0).getString("merchantCode");
        //断言merchantCode，定义一个常量并赋值，预期结果
//        String expectedData ="桂源铺";
//        String expectedData1 ="spx101701";
        String expectedData2= "0";
//        Assert.assertEquals(merchantName,expectedData);
//        Assert.assertEquals(merchantCode,expectedData1);
        Assert.assertEquals(actualResult.get("code"),expectedData2);
//        System.out.println(merchantCode);
//        System.out.println(merchantName);
        System.out.println(JSON.toJSONString(o));
    }
}
